# 🌐 區網連線設定指南

## 問題說明

`127.0.0.1` 是「本機回環位址」，每台電腦的 `127.0.0.1` 都只會指向自己。
所以 Windows 電腦用 `http://127.0.0.1:8000` 會找不到你 Mac 上的服務。

## ✅ 解決方案

### 步驟 1：啟動伺服器（在 Mac 上）

```bash
# 進入專案目錄
cd /Users/liu/Documents/porject/tw-quant-simple

# 啟動虛擬環境
source .venv/bin/activate

# 用 0.0.0.0 啟動（讓區網可以連線）
python -m uvicorn web.app:app --host 0.0.0.0 --port 8000
```

**重要說明：**

- `--host 0.0.0.0` 表示監聽所有網路介面（包括區網）
- `--port 8000` 是端口號

### 步驟 2：連線方式

#### 在你的 Mac 上（本機）

```
http://127.0.0.1:8000
或
http://192.168.1.106:8000
```

#### 在 Windows 電腦上（同區網）

```
http://192.168.1.106:8000
```

**注意：** `192.168.1.106` 是你 Mac 的區網 IP 位址

### 步驟 3：檢查防火牆（如果連不上）

如果 Windows 還是連不上，可能是 Mac 的防火牆擋住了：

1. 打開「系統設定」→「網路」→「防火牆」
2. 確認防火牆沒有擋住 Python 或 uvicorn
3. 或暫時關閉防火牆測試

---

## 🎯 方案二：改用 9527 端口

如果你想改用 9527 端口（你提到的），只需要：

```bash
# Mac 上啟動
python -m uvicorn web.app:app --host 0.0.0.0 --port 9527
```

然後 Windows 用：

```
http://192.168.1.106:9527
```

---

## 📝 快速查詢你的 Mac IP

如果你的 IP 改變了（例如重新連 WiFi），可以用這個指令查詢：

```bash
ifconfig | grep "inet " | grep -v 127.0.0.1
```

輸出範例：

```
inet 192.168.1.106 netmask 0xffffff00 broadcast 192.168.1.255
```

你的 IP 就是 `192.168.1.106`

---

## ⚠️ 安全提醒

- 使用 `0.0.0.0` 會讓同區網的所有人都能連線
- 如果在公共 WiFi，建議只用 `127.0.0.1`（僅本機）
- 在家裡或公司內網使用是安全的

---

## 🔧 常見問題

### Q: Windows 顯示「無法連線」？

A: 檢查：

1. Mac 的防火牆設定
2. 確認兩台電腦在同一個 WiFi
3. 確認 Mac 的服務有用 `--host 0.0.0.0` 啟動

### Q: 如何確認服務有啟動？

A: 在 Mac 的終端機看到這樣的訊息就是成功：

```
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
```

### Q: 可以用手機連嗎？

A: 可以！手機連同一個 WiFi，然後開瀏覽器輸入 `http://192.168.1.106:8000`
